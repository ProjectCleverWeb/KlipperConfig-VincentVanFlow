[gcode_macro _HOME]
description: Home all axes, but only if needed
gcode:
	_MACRO_START NAME="_HOME"
	{% set FORCE = params.FORCE|default(0)|float %}
	{% set X = params.X|default(printer.toolhead.position.x)|float %}
	{% set Y = params.Y|default(printer.toolhead.position.y)|float %}
	{% set Z = params.Z|default(printer.toolhead.position.z)|float %}
	{% if FORCE == 1 or printer.toolhead.homed_axes != "xyz" %}
		RESPOND MSG="Homing..."
		G28 ; Home X, Y, & Z
		G90 ; Absolute Positioning
		G1 Z{Z} F1200 ; Move to starting Z postion first (In case there is something on the bed)
		G1 X{X} Y{Y} F2700 ; Move to starting X/Y postion
	{% else %}
		RESPOND MSG="Homing Skipped"
	{% endif %}
	_MACRO_END NAME="_HOME"